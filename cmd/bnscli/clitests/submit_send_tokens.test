#!/bin/sh

set -e

if [ -z ${BNSCLI_TM_ADDR} ]
then
	# BNSCLI_TM_ADDR must be either set by the host or it will be
	# configured by the test runner to use tendermint mock server.
	>&2 echo "BNSCLI_TM_ADDR must be set in order for this test to run."
	exit 2
fi

bnscli send-tokens \
		-src "seq:test/bnscli/1" \
		-dst "seq:test/bnscli/2" \
		-amount "4 IOV" \
		-memo "bnscli test" \
	| bnscli submit

# Because submit command produce no output print its exit code instead to
# ensure it was successful.
echo "exit code: $?"
